{"ast":null,"code":"import _classCallCheck from \"/home/juan/Documentos/Arquitectura/Proyecto/turnapp-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/juan/Documentos/Arquitectura/Proyecto/turnapp-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/juan/Documentos/Arquitectura/Proyecto/turnapp-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/juan/Documentos/Arquitectura/Proyecto/turnapp-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/juan/Documentos/Arquitectura/Proyecto/turnapp-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/juan/Documentos/Arquitectura/Proyecto/turnapp-frontend/src/views/Lunchrooms/LunchroomModalComponent.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios'; //components\n\nimport MenuInfoComponent from \"../../components/MenuInfoComponent\";\nimport PriceNTimeInfoComponent from \"../../components/PriceNTimeInfoComponent\";\n\nvar LunchroomModalComponent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LunchroomModalComponent, _Component);\n\n  function LunchroomModalComponent(props) {\n    var _this;\n\n    _classCallCheck(this, LunchroomModalComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LunchroomModalComponent).call(this, props));\n    _this.menu = {\n      id_menu: 1,\n      id_lunchroom: \"asdnkjh13u4982u3\",\n      date: \"20/10/18\",\n      soup: \"changua\",\n      appetizer: \"lenteja\",\n      main_course: \"arroz\",\n      protein: \"pollo\",\n      juice: \"maracuya\",\n      dessert: \"piazza\",\n      salad: \"ensalada de frutas\"\n    };\n    _this.info = {\n      price: 5000,\n      line: 20,\n      time: 10\n    };\n\n    _this.handlerClick = function (e) {\n      axios({\n        url: 'http://35.229.97.157:5000/graphql/?',\n        method: 'post',\n        data: {\n          query: \"\\n            mutation{\\n              createTicket(ticket:{\\n                lunchroomId: \\\"\".concat(_this.props.id_lunchroom, \"\\\"\\n                userId: \").concat(_this.props.id_user, \"\\n                price: \").concat(_this.state.price_user, \"\\n              }){\\n                id\\n              }\\n            }\\n          \")\n        }\n      }).then(function (result) {\n        _this.setState({\n          id_ticket: result.data.data.createTicket.id\n        });\n\n        console.log(_this.state);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.state = {\n      currentTime: _this.info.line,\n      menu: {},\n      price_user: _this.props.id_user > 9999 ? 4800 : 6500,\n      shift: 2,\n      id_ticket: 0\n    };\n    axios({\n      url: 'http://35.229.97.157:5000/graphql/?',\n      method: 'post',\n      data: {\n        query: \"\\n          query{\\n            menusByRestaurant(id_restaurant:\\\"\".concat(_this.props.id_lunchroom, \"\\\"){\\n              soup\\n              appetizer\\n              main_course\\n              protein\\n              juice\\n              dessert\\n              salad\\n            }\\n          }\\n          \")\n      }\n    }).then(function (result) {\n      t = result.data.data.menusByRestaurant[0];\n    }).catch(function (error) {\n      console.log(error);\n    });\n    return _this;\n  }\n\n  _createClass(LunchroomModalComponent, [{\n    key: \"tick\",\n    value: function tick() {\n      this.setState(function (prevState, props) {\n        return {\n          currentTime: prevState.currentTime - 1\n        };\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.timerID = setInterval(function () {\n        return _this2.tick();\n      }, 60000);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"LunchroomModalComponent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"color\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, this.props.name)), React.createElement(\"div\", {\n        className: \"container\",\n        style: {\n          marginTop: \"2%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"thumbnail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.props.src,\n        className: \"small\",\n        alt: this.props.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"lunchroom-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(MenuInfoComponent, {\n        soup: this.state.menu.soup,\n        appetizer: this.state.menu.appetizer,\n        main_course: this.state.menu.main_course,\n        protein: this.state.menu.protein,\n        juice: this.state.menu.juice,\n        dessert: this.state.menu.dessert,\n        salad: this.state.menu.salad,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(PriceNTimeInfoComponent, {\n        price: this.state.price_user,\n        line: this.info.line,\n        time: this.state.currentTime,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(Link, {\n        to: {\n          pathname: \"tickets/\".concat(this.state.shift),\n          state: {\n            name_l: this.props.name,\n            i: this.props.i\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary btn-lg btn-block\",\n        name: \"button\",\n        style: {\n          marginBottom: \"2%\"\n        },\n        onClick: this.handlerClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Pedir turno\")))))));\n    }\n  }]);\n\n  return LunchroomModalComponent;\n}(Component);\n\nexport default LunchroomModalComponent;","map":{"version":3,"sources":["/home/juan/Documentos/Arquitectura/Proyecto/turnapp-frontend/src/views/Lunchrooms/LunchroomModalComponent.js"],"names":["React","Component","Link","axios","MenuInfoComponent","PriceNTimeInfoComponent","LunchroomModalComponent","props","menu","id_menu","id_lunchroom","date","soup","appetizer","main_course","protein","juice","dessert","salad","info","price","line","time","handlerClick","e","url","method","data","query","id_user","state","price_user","then","result","setState","id_ticket","createTicket","id","console","log","catch","error","currentTime","shift","t","menusByRestaurant","prevState","timerID","setInterval","tick","name","marginTop","src","pathname","name_l","i","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\n//components\nimport MenuInfoComponent from \"../../components/MenuInfoComponent\";\nimport PriceNTimeInfoComponent from \"../../components/PriceNTimeInfoComponent\";\n\nclass LunchroomModalComponent extends Component {\n\n  menu={\n    id_menu:1,\n    id_lunchroom:\"asdnkjh13u4982u3\",\n    date:\"20/10/18\",\n    soup:\"changua\",\n    appetizer:\"lenteja\",\n    main_course:\"arroz\",\n    protein:\"pollo\",\n    juice:\"maracuya\",\n    dessert:\"piazza\",\n    salad:\"ensalada de frutas\"\n    }\n  info={\n    price:5000,\n    line:20,\n    time:10\n  }\n\n  constructor( props ){\n    super( props );\n    this.state = {\n      currentTime:this.info.line,\n      menu:{},\n      price_user: this.props.id_user > 9999 ? 4800 : 6500,\n      shift: 2,\n      id_ticket: 0\n    };\n\n    axios({\n      url: 'http://35.229.97.157:5000/graphql/?',\n      method: 'post',\n      data: {\n        query: `\n          query{\n            menusByRestaurant(id_restaurant:\"${this.props.id_lunchroom}\"){\n              soup\n              appetizer\n              main_course\n              protein\n              juice\n              dessert\n              salad\n            }\n          }\n          `\n      }\n    }).then(result => {\n          t = result.data.data.menusByRestaurant[0] \n    }).catch(error => {\n      console.log(error)\n    });\n\n  }\n\n  tick(){\n    this.setState(( prevState, props ) => ({\n      currentTime: prevState.currentTime - 1\n    }));\n  }\n\n  componentDidMount(){\n    this.timerID = setInterval(\n      () => this.tick(),\n      60000\n    );\n  }\n\n  handlerClick = (e) => {\n    axios({\n      url: 'http://35.229.97.157:5000/graphql/?',\n      method: 'post',\n      data: {\n        query: `\n            mutation{\n              createTicket(ticket:{\n                lunchroomId: \"${this.props.id_lunchroom}\"\n                userId: ${(this.props.id_user)}\n                price: ${(this.state.price_user)}\n              }){\n                id\n              }\n            }\n          `\n      }\n    }).then(result => {\n        this.setState({\n          id_ticket: result.data.data.createTicket.id \n        });\n        console.log(this.state)\n    }).catch(error => {\n      console.log(error)\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"LunchroomModalComponent\">\n        <div className=\"color\">\n          <h1 className=\"title\">{this.props.name}</h1>\n        </div>\n        <div className=\"container\" style={{marginTop:\"2%\"}}>\n          <div className=\"row\">\n            <div className=\"col-md-4\">\n              <div className=\"thumbnail\">\n                <img src={ this.props.src }\n                className=\"small\"\n                alt={ this.props.name }/>\n              </div>\n            </div>\n          </div>\n          <div className=\"lunchroom-container\">\n            <div className=\"row\">\n              <div className=\"col-md-6\">\n                <MenuInfoComponent\n                  soup={this.state.menu.soup}\n                  appetizer={this.state.menu.appetizer}\n                  main_course={this.state.menu.main_course}\n                  protein={this.state.menu.protein}\n                  juice={this.state.menu.juice}\n                  dessert={this.state.menu.dessert}\n                  salad={this.state.menu.salad}\n                />\n              </div>\n              <div className=\"col-md-6\">\n                <PriceNTimeInfoComponent\n                  price={this.state.price_user}\n                  line={this.info.line}\n                  time={this.state.currentTime}\n                />\n                <Link to={{ pathname: `tickets/${this.state.shift}`, state: { name_l:this.props.name, i:this.props.i, } }}>\n                  <button type=\"button\"\n                  className=\"btn btn-primary btn-lg btn-block\"\n                  name=\"button\"\n                  style={{marginBottom:\"2%\"}}\n                  onClick={this.handlerClick}>\n                    Pedir turno\n                  </button>\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LunchroomModalComponent;\n"]},"metadata":{},"sourceType":"module"}